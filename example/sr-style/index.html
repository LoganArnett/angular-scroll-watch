<!DOCTYPE html>
<html ng-app="app">

  <head>
    <meta charset="utf-8" />
    <title>angular-scroll-range: sr-style</title>

    <link rel="stylesheet" href="//cdn.jsdelivr.net/bootstrap/3.2.0/css/bootstrap.min.css">

    <link rel="stylesheet/less" type="text/css" href="style.less" />

    <script src="//cdn.jsdelivr.net/less/1.7.3/less.min.js"></script>

    <script src="//code.angularjs.org/1.2.22/angular.js"></script>
    <script src="../../src/angular-scroll-range.js"></script>

    <script>
    angular.module('app', ['pc035860.scrollRange'])

    .directive('digestCounter', function ($rootScope) {
      return {
        restrict: 'EA',
        template: '<div style="position: fixed; top: 0; left: 0; z-index: 65535; color: rgb(111, 111, 255); text-shadow: 0 0 1px rgba(255, 255, 255, 0.6); line-height: 1.6; font-size: 24px; padding: 6px 12px;" title="digest count">digest: <span></span></div>',
        link: function (scope, iElm, iAttrs) {
          var count = 0, dereg;

          dereg = $rootScope.$watch(function () {
            iElm.find('span').text(++count);
          });

          iElm.bind('$destroy', function () {
            if (dereg) {
              dereg();
            }
          });
        }
      };
    })

    .controller('MainCtrl', function ($scope, $log) {
      $scope.lower = 0;
      $scope.upper = -1;

      $scope.rgb = function (p) {
        var num = Math.round(255 * p);

        num = Math.max(0, Math.min(num, 255));

        return [num, num, num].join(',');
      };
    });
    </script>
  </head>

  <body ng-controller="MainCtrl" scroll-range>
    <!-- fork me on github -->
    <a href="https://github.com/pc035860/angular-scroll-range">
      <img style="position: fixed; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
    </a>

    <!-- digest counter -->
    <div digest-counter></div>

    <div id="scroll-stage"
      sr-watch="{lower: lower, upper: upper}"
      sr-style="{backgroundColor: 'rgba(0, 0, 0, '+ 1 * $progress +')'}">
    </div>

    <h1 id="hero"
      sr-watch="{lower: 1250, upper: 3750}"
      sr-style="{
        textShadow: '0 0 20px rgba(' + rgb($progress) + ', 0.5)',
        color: 'rgb(' + rgb($progress) + ')'
      }">
      Stay with me!!
    </h1>
  </body>

</html>
